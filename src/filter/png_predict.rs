use std::convert::From;

pub enum PNGPredictorAlgorithm {
    None,
    TIFF,
    PNGNone,
    PNGSub,
    PNGUp,
    PNGAverage,
    // This is not a typo
    PNGPaeth,
    PNGOptimum,
}

impl PNGPredictorAlgorithm {
    fn is_none(&self) -> bool {
        match self {
            PNGPredictorAlgorithm::None => true,
            _ => false
        }
    }
}

impl From<u32> for PNGPredictorAlgorithm {
    fn from(value: u32) -> Self {
        match value {
            2 => PNGPredictorAlgorithm::TIFF,
            10 => PNGPredictorAlgorithm::PNGNone,
            11 => PNGPredictorAlgorithm::PNGSub,
            12 => PNGPredictorAlgorithm::PNGUp,
            13 => PNGPredictorAlgorithm::PNGAverage,
            14 => PNGPredictorAlgorithm::PNGPaeth,
            15 => PNGPredictorAlgorithm::PNGOptimum,
            _ => PNGPredictorAlgorithm::None,
        }
    }
}

// struct FlateCode {
//     len: usize,
//     value: usize
// }

// struct HuffmanTab<const N: usize> {
//     codes: [FlateCode; N],
//     len: usize,
// }

// const FLATE_MAX_LITERAL_CODES: usize = 288;
// const FLATE_MAX_DIST_CODES: usize = 30;
// const FLATE_WINDOW: usize = 32768;
// const FLATE_MASK: usize = FLATE_WINDOW - 1;

// const LITERAL_CODE_TAB: HuffmanTab<512> = HuffmanTab {
//     codes: [
//         FlateCode { len: 7, value: 0x0100 },
//         FlateCode { len: 8, value: 0x0050 },
//         FlateCode { len: 8, value: 0x0010 },
//         FlateCode { len: 8, value: 0x0118 },
//         FlateCode { len: 7, value: 0x0110 },
//         FlateCode { len: 8, value: 0x0070 },
//         FlateCode { len: 8, value: 0x0030 },
//         FlateCode { len: 9, value: 0x00c0 },
//         FlateCode { len: 7, value: 0x0108 },
//         FlateCode { len: 8, value: 0x0060 },
//         FlateCode { len: 8, value: 0x0020 },
//         FlateCode { len: 9, value: 0x00a0 },
//         FlateCode { len: 8, value: 0x0000 },
//         FlateCode { len: 8, value: 0x0080 },
//         FlateCode { len: 8, value: 0x0040 },
//         FlateCode { len: 9, value: 0x00e0 },
//         FlateCode { len: 7, value: 0x0104 },
//         FlateCode { len: 8, value: 0x0058 },
//         FlateCode { len: 8, value: 0x0018 },
//         FlateCode { len: 9, value: 0x0090 },
//         FlateCode { len: 7, value: 0x0114 },
//         FlateCode { len: 8, value: 0x0078 },
//         FlateCode { len: 8, value: 0x0038 },
//         FlateCode { len: 9, value: 0x00d0 },
//         FlateCode { len: 7, value: 0x010c },
//         FlateCode { len: 8, value: 0x0068 },
//         FlateCode { len: 8, value: 0x0028 },
//         FlateCode { len: 9, value: 0x00b0 },
//         FlateCode { len: 8, value: 0x0008 },
//         FlateCode { len: 8, value: 0x0088 },
//         FlateCode { len: 8, value: 0x0048 },
//         FlateCode { len: 9, value: 0x00f0 },
//         FlateCode { len: 7, value: 0x0102 },
//         FlateCode { len: 8, value: 0x0054 },
//         FlateCode { len: 8, value: 0x0014 },
//         FlateCode { len: 8, value: 0x011c },
//         FlateCode { len: 7, value: 0x0112 },
//         FlateCode { len: 8, value: 0x0074 },
//         FlateCode { len: 8, value: 0x0034 },
//         FlateCode { len: 9, value: 0x00c8 },
//         FlateCode { len: 7, value: 0x010a },
//         FlateCode { len: 8, value: 0x0064 },
//         FlateCode { len: 8, value: 0x0024 },
//         FlateCode { len: 9, value: 0x00a8 },
//         FlateCode { len: 8, value: 0x0004 },
//         FlateCode { len: 8, value: 0x0084 },
//         FlateCode { len: 8, value: 0x0044 },
//         FlateCode { len: 9, value: 0x00e8 },
//         FlateCode { len: 7, value: 0x0106 },
//         FlateCode { len: 8, value: 0x005c },
//         FlateCode { len: 8, value: 0x001c },
//         FlateCode { len: 9, value: 0x0098 },
//         FlateCode { len: 7, value: 0x0116 },
//         FlateCode { len: 8, value: 0x007c },
//         FlateCode { len: 8, value: 0x003c },
//         FlateCode { len: 9, value: 0x00d8 },
//         FlateCode { len: 7, value: 0x010e },
//         FlateCode { len: 8, value: 0x006c },
//         FlateCode { len: 8, value: 0x002c },
//         FlateCode { len: 9, value: 0x00b8 },
//         FlateCode { len: 8, value: 0x000c },
//         FlateCode { len: 8, value: 0x008c },
//         FlateCode { len: 8, value: 0x004c },
//         FlateCode { len: 9, value: 0x00f8 },
//         FlateCode { len: 7, value: 0x0101 },
//         FlateCode { len: 8, value: 0x0052 },
//         FlateCode { len: 8, value: 0x0012 },
//         FlateCode { len: 8, value: 0x011a },
//         FlateCode { len: 7, value: 0x0111 },
//         FlateCode { len: 8, value: 0x0072 },
//         FlateCode { len: 8, value: 0x0032 },
//         FlateCode { len: 9, value: 0x00c4 },
//         FlateCode { len: 7, value: 0x0109 },
//         FlateCode { len: 8, value: 0x0062 },
//         FlateCode { len: 8, value: 0x0022 },
//         FlateCode { len: 9, value: 0x00a4 },
//         FlateCode { len: 8, value: 0x0002 },
//         FlateCode { len: 8, value: 0x0082 },
//         FlateCode { len: 8, value: 0x0042 },
//         FlateCode { len: 9, value: 0x00e4 },
//         FlateCode { len: 7, value: 0x0105 },
//         FlateCode { len: 8, value: 0x005a },
//         FlateCode { len: 8, value: 0x001a },
//         FlateCode { len: 9, value: 0x0094 },
//         FlateCode { len: 7, value: 0x0115 },
//         FlateCode { len: 8, value: 0x007a },
//         FlateCode { len: 8, value: 0x003a },
//         FlateCode { len: 9, value: 0x00d4 },
//         FlateCode { len: 7, value: 0x010d },
//         FlateCode { len: 8, value: 0x006a },
//         FlateCode { len: 8, value: 0x002a },
//         FlateCode { len: 9, value: 0x00b4 },
//         FlateCode { len: 8, value: 0x000a },
//         FlateCode { len: 8, value: 0x008a },
//         FlateCode { len: 8, value: 0x004a },
//         FlateCode { len: 9, value: 0x00f4 },
//         FlateCode { len: 7, value: 0x0103 },
//         FlateCode { len: 8, value: 0x0056 },
//         FlateCode { len: 8, value: 0x0016 },
//         FlateCode { len: 8, value: 0x011e },
//         FlateCode { len: 7, value: 0x0113 },
//         FlateCode { len: 8, value: 0x0076 },
//         FlateCode { len: 8, value: 0x0036 },
//         FlateCode { len: 9, value: 0x00cc },
//         FlateCode { len: 7, value: 0x010b },
//         FlateCode { len: 8, value: 0x0066 },
//         FlateCode { len: 8, value: 0x0026 },
//         FlateCode { len: 9, value: 0x00ac },
//         FlateCode { len: 8, value: 0x0006 },
//         FlateCode { len: 8, value: 0x0086 },
//         FlateCode { len: 8, value: 0x0046 },
//         FlateCode { len: 9, value: 0x00ec },
//         FlateCode { len: 7, value: 0x0107 },
//         FlateCode { len: 8, value: 0x005e },
//         FlateCode { len: 8, value: 0x001e },
//         FlateCode { len: 9, value: 0x009c },
//         FlateCode { len: 7, value: 0x0117 },
//         FlateCode { len: 8, value: 0x007e },
//         FlateCode { len: 8, value: 0x003e },
//         FlateCode { len: 9, value: 0x00dc },
//         FlateCode { len: 7, value: 0x010f },
//         FlateCode { len: 8, value: 0x006e },
//         FlateCode { len: 8, value: 0x002e },
//         FlateCode { len: 9, value: 0x00bc },
//         FlateCode { len: 8, value: 0x000e },
//         FlateCode { len: 8, value: 0x008e },
//         FlateCode { len: 8, value: 0x004e },
//         FlateCode { len: 9, value: 0x00fc },
//         FlateCode { len: 7, value: 0x0100 },
//         FlateCode { len: 8, value: 0x0051 },
//         FlateCode { len: 8, value: 0x0011 },
//         FlateCode { len: 8, value: 0x0119 },
//         FlateCode { len: 7, value: 0x0110 },
//         FlateCode { len: 8, value: 0x0071 },
//         FlateCode { len: 8, value: 0x0031 },
//         FlateCode { len: 9, value: 0x00c2 },
//         FlateCode { len: 7, value: 0x0108 },
//         FlateCode { len: 8, value: 0x0061 },
//         FlateCode { len: 8, value: 0x0021 },
//         FlateCode { len: 9, value: 0x00a2 },
//         FlateCode { len: 8, value: 0x0001 },
//         FlateCode { len: 8, value: 0x0081 },
//         FlateCode { len: 8, value: 0x0041 },
//         FlateCode { len: 9, value: 0x00e2 },
//         FlateCode { len: 7, value: 0x0104 },
//         FlateCode { len: 8, value: 0x0059 },
//         FlateCode { len: 8, value: 0x0019 },
//         FlateCode { len: 9, value: 0x0092 },
//         FlateCode { len: 7, value: 0x0114 },
//         FlateCode { len: 8, value: 0x0079 },
//         FlateCode { len: 8, value: 0x0039 },
//         FlateCode { len: 9, value: 0x00d2 },
//         FlateCode { len: 7, value: 0x010c },
//         FlateCode { len: 8, value: 0x0069 },
//         FlateCode { len: 8, value: 0x0029 },
//         FlateCode { len: 9, value: 0x00b2 },
//         FlateCode { len: 8, value: 0x0009 },
//         FlateCode { len: 8, value: 0x0089 },
//         FlateCode { len: 8, value: 0x0049 },
//         FlateCode { len: 9, value: 0x00f2 },
//         FlateCode { len: 7, value: 0x0102 },
//         FlateCode { len: 8, value: 0x0055 },
//         FlateCode { len: 8, value: 0x0015 },
//         FlateCode { len: 8, value: 0x011d },
//         FlateCode { len: 7, value: 0x0112 },
//         FlateCode { len: 8, value: 0x0075 },
//         FlateCode { len: 8, value: 0x0035 },
//         FlateCode { len: 9, value: 0x00ca },
//         FlateCode { len: 7, value: 0x010a },
//         FlateCode { len: 8, value: 0x0065 },
//         FlateCode { len: 8, value: 0x0025 },
//         FlateCode { len: 9, value: 0x00aa },
//         FlateCode { len: 8, value: 0x0005 },
//         FlateCode { len: 8, value: 0x0085 },
//         FlateCode { len: 8, value: 0x0045 },
//         FlateCode { len: 9, value: 0x00ea },
//         FlateCode { len: 7, value: 0x0106 },
//         FlateCode { len: 8, value: 0x005d },
//         FlateCode { len: 8, value: 0x001d },
//         FlateCode { len: 9, value: 0x009a },
//         FlateCode { len: 7, value: 0x0116 },
//         FlateCode { len: 8, value: 0x007d },
//         FlateCode { len: 8, value: 0x003d },
//         FlateCode { len: 9, value: 0x00da },
//         FlateCode { len: 7, value: 0x010e },
//         FlateCode { len: 8, value: 0x006d },
//         FlateCode { len: 8, value: 0x002d },
//         FlateCode { len: 9, value: 0x00ba },
//         FlateCode { len: 8, value: 0x000d },
//         FlateCode { len: 8, value: 0x008d },
//         FlateCode { len: 8, value: 0x004d },
//         FlateCode { len: 9, value: 0x00fa },
//         FlateCode { len: 7, value: 0x0101 },
//         FlateCode { len: 8, value: 0x0053 },
//         FlateCode { len: 8, value: 0x0013 },
//         FlateCode { len: 8, value: 0x011b },
//         FlateCode { len: 7, value: 0x0111 },
//         FlateCode { len: 8, value: 0x0073 },
//         FlateCode { len: 8, value: 0x0033 },
//         FlateCode { len: 9, value: 0x00c6 },
//         FlateCode { len: 7, value: 0x0109 },
//         FlateCode { len: 8, value: 0x0063 },
//         FlateCode { len: 8, value: 0x0023 },
//         FlateCode { len: 9, value: 0x00a6 },
//         FlateCode { len: 8, value: 0x0003 },
//         FlateCode { len: 8, value: 0x0083 },
//         FlateCode { len: 8, value: 0x0043 },
//         FlateCode { len: 9, value: 0x00e6 },
//         FlateCode { len: 7, value: 0x0105 },
//         FlateCode { len: 8, value: 0x005b },
//         FlateCode { len: 8, value: 0x001b },
//         FlateCode { len: 9, value: 0x0096 },
//         FlateCode { len: 7, value: 0x0115 },
//         FlateCode { len: 8, value: 0x007b },
//         FlateCode { len: 8, value: 0x003b },
//         FlateCode { len: 9, value: 0x00d6 },
//         FlateCode { len: 7, value: 0x010d },
//         FlateCode { len: 8, value: 0x006b },
//         FlateCode { len: 8, value: 0x002b },
//         FlateCode { len: 9, value: 0x00b6 },
//         FlateCode { len: 8, value: 0x000b },
//         FlateCode { len: 8, value: 0x008b },
//         FlateCode { len: 8, value: 0x004b },
//         FlateCode { len: 9, value: 0x00f6 },
//         FlateCode { len: 7, value: 0x0103 },
//         FlateCode { len: 8, value: 0x0057 },
//         FlateCode { len: 8, value: 0x0017 },
//         FlateCode { len: 8, value: 0x011f },
//         FlateCode { len: 7, value: 0x0113 },
//         FlateCode { len: 8, value: 0x0077 },
//         FlateCode { len: 8, value: 0x0037 },
//         FlateCode { len: 9, value: 0x00ce },
//         FlateCode { len: 7, value: 0x010b },
//         FlateCode { len: 8, value: 0x0067 },
//         FlateCode { len: 8, value: 0x0027 },
//         FlateCode { len: 9, value: 0x00ae },
//         FlateCode { len: 8, value: 0x0007 },
//         FlateCode { len: 8, value: 0x0087 },
//         FlateCode { len: 8, value: 0x0047 },
//         FlateCode { len: 9, value: 0x00ee },
//         FlateCode { len: 7, value: 0x0107 },
//         FlateCode { len: 8, value: 0x005f },
//         FlateCode { len: 8, value: 0x001f },
//         FlateCode { len: 9, value: 0x009e },
//         FlateCode { len: 7, value: 0x0117 },
//         FlateCode { len: 8, value: 0x007f },
//         FlateCode { len: 8, value: 0x003f },
//         FlateCode { len: 9, value: 0x00de },
//         FlateCode { len: 7, value: 0x010f },
//         FlateCode { len: 8, value: 0x006f },
//         FlateCode { len: 8, value: 0x002f },
//         FlateCode { len: 9, value: 0x00be },
//         FlateCode { len: 8, value: 0x000f },
//         FlateCode { len: 8, value: 0x008f },
//         FlateCode { len: 8, value: 0x004f },
//         FlateCode { len: 9, value: 0x00fe },
//         FlateCode { len: 7, value: 0x0100 },
//         FlateCode { len: 8, value: 0x0050 },
//         FlateCode { len: 8, value: 0x0010 },
//         FlateCode { len: 8, value: 0x0118 },
//         FlateCode { len: 7, value: 0x0110 },
//         FlateCode { len: 8, value: 0x0070 },
//         FlateCode { len: 8, value: 0x0030 },
//         FlateCode { len: 9, value: 0x00c1 },
//         FlateCode { len: 7, value: 0x0108 },
//         FlateCode { len: 8, value: 0x0060 },
//         FlateCode { len: 8, value: 0x0020 },
//         FlateCode { len: 9, value: 0x00a1 },
//         FlateCode { len: 8, value: 0x0000 },
//         FlateCode { len: 8, value: 0x0080 },
//         FlateCode { len: 8, value: 0x0040 },
//         FlateCode { len: 9, value: 0x00e1 },
//         FlateCode { len: 7, value: 0x0104 },
//         FlateCode { len: 8, value: 0x0058 },
//         FlateCode { len: 8, value: 0x0018 },
//         FlateCode { len: 9, value: 0x0091 },
//         FlateCode { len: 7, value: 0x0114 },
//         FlateCode { len: 8, value: 0x0078 },
//         FlateCode { len: 8, value: 0x0038 },
//         FlateCode { len: 9, value: 0x00d1 },
//         FlateCode { len: 7, value: 0x010c },
//         FlateCode { len: 8, value: 0x0068 },
//         FlateCode { len: 8, value: 0x0028 },
//         FlateCode { len: 9, value: 0x00b1 },
//         FlateCode { len: 8, value: 0x0008 },
//         FlateCode { len: 8, value: 0x0088 },
//         FlateCode { len: 8, value: 0x0048 },
//         FlateCode { len: 9, value: 0x00f1 },
//         FlateCode { len: 7, value: 0x0102 },
//         FlateCode { len: 8, value: 0x0054 },
//         FlateCode { len: 8, value: 0x0014 },
//         FlateCode { len: 8, value: 0x011c },
//         FlateCode { len: 7, value: 0x0112 },
//         FlateCode { len: 8, value: 0x0074 },
//         FlateCode { len: 8, value: 0x0034 },
//         FlateCode { len: 9, value: 0x00c9 },
//         FlateCode { len: 7, value: 0x010a },
//         FlateCode { len: 8, value: 0x0064 },
//         FlateCode { len: 8, value: 0x0024 },
//         FlateCode { len: 9, value: 0x00a9 },
//         FlateCode { len: 8, value: 0x0004 },
//         FlateCode { len: 8, value: 0x0084 },
//         FlateCode { len: 8, value: 0x0044 },
//         FlateCode { len: 9, value: 0x00e9 },
//         FlateCode { len: 7, value: 0x0106 },
//         FlateCode { len: 8, value: 0x005c },
//         FlateCode { len: 8, value: 0x001c },
//         FlateCode { len: 9, value: 0x0099 },
//         FlateCode { len: 7, value: 0x0116 },
//         FlateCode { len: 8, value: 0x007c },
//         FlateCode { len: 8, value: 0x003c },
//         FlateCode { len: 9, value: 0x00d9 },
//         FlateCode { len: 7, value: 0x010e },
//         FlateCode { len: 8, value: 0x006c },
//         FlateCode { len: 8, value: 0x002c },
//         FlateCode { len: 9, value: 0x00b9 },
//         FlateCode { len: 8, value: 0x000c },
//         FlateCode { len: 8, value: 0x008c },
//         FlateCode { len: 8, value: 0x004c },
//         FlateCode { len: 9, value: 0x00f9 },
//         FlateCode { len: 7, value: 0x0101 },
//         FlateCode { len: 8, value: 0x0052 },
//         FlateCode { len: 8, value: 0x0012 },
//         FlateCode { len: 8, value: 0x011a },
//         FlateCode { len: 7, value: 0x0111 },
//         FlateCode { len: 8, value: 0x0072 },
//         FlateCode { len: 8, value: 0x0032 },
//         FlateCode { len: 9, value: 0x00c5 },
//         FlateCode { len: 7, value: 0x0109 },
//         FlateCode { len: 8, value: 0x0062 },
//         FlateCode { len: 8, value: 0x0022 },
//         FlateCode { len: 9, value: 0x00a5 },
//         FlateCode { len: 8, value: 0x0002 },
//         FlateCode { len: 8, value: 0x0082 },
//         FlateCode { len: 8, value: 0x0042 },
//         FlateCode { len: 9, value: 0x00e5 },
//         FlateCode { len: 7, value: 0x0105 },
//         FlateCode { len: 8, value: 0x005a },
//         FlateCode { len: 8, value: 0x001a },
//         FlateCode { len: 9, value: 0x0095 },
//         FlateCode { len: 7, value: 0x0115 },
//         FlateCode { len: 8, value: 0x007a },
//         FlateCode { len: 8, value: 0x003a },
//         FlateCode { len: 9, value: 0x00d5 },
//         FlateCode { len: 7, value: 0x010d },
//         FlateCode { len: 8, value: 0x006a },
//         FlateCode { len: 8, value: 0x002a },
//         FlateCode { len: 9, value: 0x00b5 },
//         FlateCode { len: 8, value: 0x000a },
//         FlateCode { len: 8, value: 0x008a },
//         FlateCode { len: 8, value: 0x004a },
//         FlateCode { len: 9, value: 0x00f5 },
//         FlateCode { len: 7, value: 0x0103 },
//         FlateCode { len: 8, value: 0x0056 },
//         FlateCode { len: 8, value: 0x0016 },
//         FlateCode { len: 8, value: 0x011e },
//         FlateCode { len: 7, value: 0x0113 },
//         FlateCode { len: 8, value: 0x0076 },
//         FlateCode { len: 8, value: 0x0036 },
//         FlateCode { len: 9, value: 0x00cd },
//         FlateCode { len: 7, value: 0x010b },
//         FlateCode { len: 8, value: 0x0066 },
//         FlateCode { len: 8, value: 0x0026 },
//         FlateCode { len: 9, value: 0x00ad },
//         FlateCode { len: 8, value: 0x0006 },
//         FlateCode { len: 8, value: 0x0086 },
//         FlateCode { len: 8, value: 0x0046 },
//         FlateCode { len: 9, value: 0x00ed },
//         FlateCode { len: 7, value: 0x0107 },
//         FlateCode { len: 8, value: 0x005e },
//         FlateCode { len: 8, value: 0x001e },
//         FlateCode { len: 9, value: 0x009d },
//         FlateCode { len: 7, value: 0x0117 },
//         FlateCode { len: 8, value: 0x007e },
//         FlateCode { len: 8, value: 0x003e },
//         FlateCode { len: 9, value: 0x00dd },
//         FlateCode { len: 7, value: 0x010f },
//         FlateCode { len: 8, value: 0x006e },
//         FlateCode { len: 8, value: 0x002e },
//         FlateCode { len: 9, value: 0x00bd },
//         FlateCode { len: 8, value: 0x000e },
//         FlateCode { len: 8, value: 0x008e },
//         FlateCode { len: 8, value: 0x004e },
//         FlateCode { len: 9, value: 0x00fd },
//         FlateCode { len: 7, value: 0x0100 },
//         FlateCode { len: 8, value: 0x0051 },
//         FlateCode { len: 8, value: 0x0011 },
//         FlateCode { len: 8, value: 0x0119 },
//         FlateCode { len: 7, value: 0x0110 },
//         FlateCode { len: 8, value: 0x0071 },
//         FlateCode { len: 8, value: 0x0031 },
//         FlateCode { len: 9, value: 0x00c3 },
//         FlateCode { len: 7, value: 0x0108 },
//         FlateCode { len: 8, value: 0x0061 },
//         FlateCode { len: 8, value: 0x0021 },
//         FlateCode { len: 9, value: 0x00a3 },
//         FlateCode { len: 8, value: 0x0001 },
//         FlateCode { len: 8, value: 0x0081 },
//         FlateCode { len: 8, value: 0x0041 },
//         FlateCode { len: 9, value: 0x00e3 },
//         FlateCode { len: 7, value: 0x0104 },
//         FlateCode { len: 8, value: 0x0059 },
//         FlateCode { len: 8, value: 0x0019 },
//         FlateCode { len: 9, value: 0x0093 },
//         FlateCode { len: 7, value: 0x0114 },
//         FlateCode { len: 8, value: 0x0079 },
//         FlateCode { len: 8, value: 0x0039 },
//         FlateCode { len: 9, value: 0x00d3 },
//         FlateCode { len: 7, value: 0x010c },
//         FlateCode { len: 8, value: 0x0069 },
//         FlateCode { len: 8, value: 0x0029 },
//         FlateCode { len: 9, value: 0x00b3 },
//         FlateCode { len: 8, value: 0x0009 },
//         FlateCode { len: 8, value: 0x0089 },
//         FlateCode { len: 8, value: 0x0049 },
//         FlateCode { len: 9, value: 0x00f3 },
//         FlateCode { len: 7, value: 0x0102 },
//         FlateCode { len: 8, value: 0x0055 },
//         FlateCode { len: 8, value: 0x0015 },
//         FlateCode { len: 8, value: 0x011d },
//         FlateCode { len: 7, value: 0x0112 },
//         FlateCode { len: 8, value: 0x0075 },
//         FlateCode { len: 8, value: 0x0035 },
//         FlateCode { len: 9, value: 0x00cb },
//         FlateCode { len: 7, value: 0x010a },
//         FlateCode { len: 8, value: 0x0065 },
//         FlateCode { len: 8, value: 0x0025 },
//         FlateCode { len: 9, value: 0x00ab },
//         FlateCode { len: 8, value: 0x0005 },
//         FlateCode { len: 8, value: 0x0085 },
//         FlateCode { len: 8, value: 0x0045 },
//         FlateCode { len: 9, value: 0x00eb },
//         FlateCode { len: 7, value: 0x0106 },
//         FlateCode { len: 8, value: 0x005d },
//         FlateCode { len: 8, value: 0x001d },
//         FlateCode { len: 9, value: 0x009b },
//         FlateCode { len: 7, value: 0x0116 },
//         FlateCode { len: 8, value: 0x007d },
//         FlateCode { len: 8, value: 0x003d },
//         FlateCode { len: 9, value: 0x00db },
//         FlateCode { len: 7, value: 0x010e },
//         FlateCode { len: 8, value: 0x006d },
//         FlateCode { len: 8, value: 0x002d },
//         FlateCode { len: 9, value: 0x00bb },
//         FlateCode { len: 8, value: 0x000d },
//         FlateCode { len: 8, value: 0x008d },
//         FlateCode { len: 8, value: 0x004d },
//         FlateCode { len: 9, value: 0x00fb },
//         FlateCode { len: 7, value: 0x0101 },
//         FlateCode { len: 8, value: 0x0053 },
//         FlateCode { len: 8, value: 0x0013 },
//         FlateCode { len: 8, value: 0x011b },
//         FlateCode { len: 7, value: 0x0111 },
//         FlateCode { len: 8, value: 0x0073 },
//         FlateCode { len: 8, value: 0x0033 },
//         FlateCode { len: 9, value: 0x00c7 },
//         FlateCode { len: 7, value: 0x0109 },
//         FlateCode { len: 8, value: 0x0063 },
//         FlateCode { len: 8, value: 0x0023 },
//         FlateCode { len: 9, value: 0x00a7 },
//         FlateCode { len: 8, value: 0x0003 },
//         FlateCode { len: 8, value: 0x0083 },
//         FlateCode { len: 8, value: 0x0043 },
//         FlateCode { len: 9, value: 0x00e7 },
//         FlateCode { len: 7, value: 0x0105 },
//         FlateCode { len: 8, value: 0x005b },
//         FlateCode { len: 8, value: 0x001b },
//         FlateCode { len: 9, value: 0x0097 },
//         FlateCode { len: 7, value: 0x0115 },
//         FlateCode { len: 8, value: 0x007b },
//         FlateCode { len: 8, value: 0x003b },
//         FlateCode { len: 9, value: 0x00d7 },
//         FlateCode { len: 7, value: 0x010d },
//         FlateCode { len: 8, value: 0x006b },
//         FlateCode { len: 8, value: 0x002b },
//         FlateCode { len: 9, value: 0x00b7 },
//         FlateCode { len: 8, value: 0x000b },
//         FlateCode { len: 8, value: 0x008b },
//         FlateCode { len: 8, value: 0x004b },
//         FlateCode { len: 9, value: 0x00f7 },
//         FlateCode { len: 7, value: 0x0103 },
//         FlateCode { len: 8, value: 0x0057 },
//         FlateCode { len: 8, value: 0x0017 },
//         FlateCode { len: 8, value: 0x011f },
//         FlateCode { len: 7, value: 0x0113 },
//         FlateCode { len: 8, value: 0x0077 },
//         FlateCode { len: 8, value: 0x0037 },
//         FlateCode { len: 9, value: 0x00cf },
//         FlateCode { len: 7, value: 0x010b },
//         FlateCode { len: 8, value: 0x0067 },
//         FlateCode { len: 8, value: 0x0027 },
//         FlateCode { len: 9, value: 0x00af },
//         FlateCode { len: 8, value: 0x0007 },
//         FlateCode { len: 8, value: 0x0087 },
//         FlateCode { len: 8, value: 0x0047 },
//         FlateCode { len: 9, value: 0x00ef },
//         FlateCode { len: 7, value: 0x0107 },
//         FlateCode { len: 8, value: 0x005f },
//         FlateCode { len: 8, value: 0x001f },
//         FlateCode { len: 9, value: 0x009f },
//         FlateCode { len: 7, value: 0x0117 },
//         FlateCode { len: 8, value: 0x007f },
//         FlateCode { len: 8, value: 0x003f },
//         FlateCode { len: 9, value: 0x00df },
//         FlateCode { len: 7, value: 0x010f },
//         FlateCode { len: 8, value: 0x006f },
//         FlateCode { len: 8, value: 0x002f },
//         FlateCode { len: 9, value: 0x00bf },
//         FlateCode { len: 8, value: 0x000f },
//         FlateCode { len: 8, value: 0x008f },
//         FlateCode { len: 8, value: 0x004f },
//         FlateCode { len: 9, value: 0x00ff }
//     ],
//     len: 9,
// };

// const DIST_CODE_TAB: HuffmanTab<32> = HuffmanTab {
//     codes: [
//         FlateCode { len: 5, value: 0x0000 },
//         FlateCode { len: 5, value: 0x0010 },
//         FlateCode { len: 5, value: 0x0008 },
//         FlateCode { len: 5, value: 0x0018 },
//         FlateCode { len: 5, value: 0x0004 },
//         FlateCode { len: 5, value: 0x0014 },
//         FlateCode { len: 5, value: 0x000c },
//         FlateCode { len: 5, value: 0x001c },
//         FlateCode { len: 5, value: 0x0002 },
//         FlateCode { len: 5, value: 0x0012 },
//         FlateCode { len: 5, value: 0x000a },
//         FlateCode { len: 5, value: 0x001a },
//         FlateCode { len: 5, value: 0x0006 },
//         FlateCode { len: 5, value: 0x0016 },
//         FlateCode { len: 5, value: 0x000e },
//         FlateCode { len: 0, value: 0x0000 },
//         FlateCode { len: 5, value: 0x0001 },
//         FlateCode { len: 5, value: 0x0011 },
//         FlateCode { len: 5, value: 0x0009 },
//         FlateCode { len: 5, value: 0x0019 },
//         FlateCode { len: 5, value: 0x0005 },
//         FlateCode { len: 5, value: 0x0015 },
//         FlateCode { len: 5, value: 0x000d },
//         FlateCode { len: 5, value: 0x001d },
//         FlateCode { len: 5, value: 0x0003 },
//         FlateCode { len: 5, value: 0x0013 },
//         FlateCode { len: 5, value: 0x000b },
//         FlateCode { len: 5, value: 0x001b },
//         FlateCode { len: 5, value: 0x0007 },
//         FlateCode { len: 5, value: 0x0017 },
//         FlateCode { len: 5, value: 0x000f },
//         FlateCode { len: 0, value: 0x0000 }
//     ],
//     len: 5,
// };

struct StreamPredictor<'a> {
    data: &'a [u8],
    pos: usize,
    algorithm: PNGPredictorAlgorithm,
    columns: u32,
    colors: u32,
    bits_per_component: u32,
}

impl<'a> StreamPredictor<'a> {
    pub fn new(data: &'a[u8], predictor: Option<u32>, columns: Option<u32>, colors: Option<u32>, bits_per_component: Option<u32>) -> Self {
        let algorithm = PNGPredictorAlgorithm::from(predictor.unwrap_or(1));
        let columns = columns.unwrap_or(0);
        let colors = colors.unwrap_or(0);
        let bits_per_component = bits_per_component.unwrap_or(0);

        Self {
            data,
            pos: 0,
            algorithm,
            columns,
            colors,
            bits_per_component,
        }
    }
}